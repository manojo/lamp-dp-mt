system["test", domain[0, {}, {pol[1, 1, 0, 0, {{1, 1}}, {{1, 1}}]}], 
  {decl["x", integer, domain[0, {}, {pol[1, 1, 0, 0, {{1, 1}}, {{1, 1}}]}]]}, 
  {decl["y", integer, domain[0, {}, {pol[1, 1, 0, 0, {{1, 1}}, {{1, 1}}]}]]}, 
  {decl["V", integer, domain[1, {"i"}, 
     {pol[2, 2, 0, 0, {{1, 1, -1}, {1, 0, 1}}, {{1, 1, 0}, {1, 1, 1}}]}]], 
   decl["U", integer, domain[0, {}, {pol[1, 1, 0, 0, {{1, 1}}, {{1, 1}}]}]], 
   decl["Z", integer, domain[1, {"i"}, 
     {pol[1, 2, 0, 1, {{1, 0, 1}}, {{0, 1, 0}, {1, 0, 1}}]}]]}, 
  {equation["U", var["x"]], equation["V", 
    binop[add, affine[var["Z"], matrix[2, 2, {"i"}, {{1, 2}, {0, 1}}]], 
     affine[var["x"], matrix[1, 2, {"i"}, {{0, 1}}]]]], 
   equation["Z", case[{restrict[domain[1, {"i"}, 
        {pol[2, 1, 1, 0, {{0, 1, 0}, {1, 0, 1}}, {{1, 0, 1}}]}], 
       affine[var["U"], matrix[1, 2, {"i"}, {{0, 1}}]]], 
      restrict[domain[1, {"i"}, 
        {pol[2, 2, 0, 0, {{1, 1, -1}, {1, 0, 1}}, {{1, 1, 0}, {1, 1, 1}}]}], 
       var["V"]], restrict[domain[1, {"i"}, 
        {pol[2, 2, 0, 0, {{1, -1, -1}, {1, 0, 1}}, 
          {{1, -1, 0}, {1, -1, 1}}]}], 
       affine[var["Z"], matrix[2, 2, {"i"}, {{1, 1}, {0, 1}}]]]}]]}]
