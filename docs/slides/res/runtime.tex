\documentclass[11pt]{article}
\usepackage{amssymb,amsmath,amsthm,hyperref,verbatim,pict2e,graphicx,marvosym,array,booktabs}
\usepackage[usenames]{xcolor} % color names ,dvipsnames,svgnames,table
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\pagestyle{empty} % remove page numbers
\oddsidemargin -3cm
\evensidemargin -3cm
\topmargin -3.5cm
\headsep 1cm
\parskip 0cm
\parindent 0cm
\setlength{\paperwidth}{12cm}
\setlength{\paperheight}{12cm}
\begin{document}

% \tbox : multiline textbox for pictures; \tbox[0=no frame,l=left_align]{width}{height}{content}
\makeatletter
\def\instr#1#2{TT\fi\begingroup\edef\x{\endgroup\noexpand\in@{#1}{#2}}\x\ifin@}
\newlength{\tbox@len}
\newcommand\tbox[4][]{\setlength{\tbox@len}{\unitlength}
	\if\instr{0}{#1}\else \put(0,0){\framebox(#2,#3)[c]{}} \fi
	\setlength{\unitlength}{.5\tbox@len}\put(0,#3){\setlength{\unitlength}{1pt}%
		\put(2,-3){\setlength{\unitlength}{#2\tbox@len}\addtolength{\unitlength}{-4pt}%
			\begin{minipage}{\unitlength}\if\instr{l}{#1} \else \centering \fi #4 \end{minipage}}}
	\setlength{\unitlength}{\tbox@len}
}
\makeatother



\newcommand\Cd[3][0,-1]{\put(#2){\put(.5,.5){\circle*{.3}}\put(.5,.5){\linethickness{1.5pt}\vector(#1){#3}}}} % dependency [dx,dy]{x,y}{len}
\def\Cg#1{\put(#1){\color{lightgray}\put(0,0){\polygon*(0,0)(0,1)(1,1)(1,0)}}} % grayed cell (not to store

\begin{center}\setlength{\unitlength}{.6cm}\begin{picture}(15,18)

% BACKGROUND
\put(0,0){\circle*{300}}

\color{white}

\put(0,17){\tbox{5}{1}{DSL libraries}}\put(6,17){\tbox{5}{1}{User program}}
{\linethickness{1.5pt}\moveto(8,17)\lineto(8,16.25)\lineto(2.5,16.25)\strokepath\put(2.5,17){\vector(0,-1){2}}}\put(-1.5,16){\small Scala compiler}
\put(8.5,17){\linethickness{1.5pt}\vector(0,-1){2}}\put(8.75,16){\small LMS}
% -----
\put(0,14){\tbox{5}{1}{JVM bytecode}}\put(6,14){\tbox{5}{1}{C functions}}
\put(2.5,14){\vector(0,-1){2.75}}\put(8.5,14){\vector(0,-1){1.75}}
\multiput(-2,13)(.15,0){130}{\circle*{.05}}\put(14,13.25){\small compilation}\put(14,12.5){\small run-time}
% -----
{\linethickness{1.5pt}\moveto(2.5,7)\lineto(2.5,11)\lineto(5,11)\strokepath\put(5,11){\vector(1,0){1}}}
\put(2.75,9){\small recurrences analysis}\put(2.75,8.4){\small code generation}
% -----
\put(6,10){\tbox{5}{2}{C/CUDA/JNI code}}
\put(8.5,10){\linethickness{1.5pt}\vector(0,-1){3}}\put(8.75,9){\small constants evaluation}\put(8.75,8.4){\small compilation}
{\linethickness{1.5pt}\moveto(12,1.5)\lineto(12,8)\lineto(10,8)\strokepath\put(10,8){\vector(-1,0){1.5}}}\put(12.25,6.5){\rotatebox{-90}{\small input size}}
% -----
\put(0,2.5){\tbox{5}{4.5}{Scala parsers}}
\put(6,2.5){\put(0,0){\tbox{5}{4.5}{}}
	\put(.25,3.25){\tbox{4.5}{1}{CUDA kernels}}\put(.25,1.75){\tbox{4.5}{1}{JNI / host C}}\put(.25,.25){\tbox{4.5}{1}{Scala wrapper}}
	\put(3.5,3.25){\vector(0,-1){.5}}\put(3.5,1.75){\vector(0,-1){.5}}\put(1.5,1.25){\vector(0,1){.5}}\put(1.5,2.75){\vector(0,1){.5}}}
\put(13,1){\tbox[l0]{4}{1}{Input data}}
\put(13,0){\tbox[l0]{4}{1}{Output data}}
\put(1.5,1.5){\vector(0,1){1}}\put(7.5,1.5){\vector(0,1){1}}\moveto(1.5,2)\lineto(1.5,1.5)\lineto(13,1.5)\strokepath % input
\put(9.5,.5){\line(0,1){2}}\moveto(3.5,2.5)\lineto(3.5,.5)\lineto(12,.5)\strokepath\put(12,.5){\vector(1,0){1}} % output


\end{picture}\end{center}


\end{document}
